<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: kleks
  Date: 1/29/13
  Time: 10:09 AM
-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:a4j="http://richfaces.org/a4j"
                template="../../layout/template1.xhtml">

<ui:define name="menuleft">

</ui:define>
<ui:define name="content">
<h:form id="f1">
<div class="span6 marginBottom">
    <rich:dataTable id="info" value="#{fileAccessView.userFiles}" var="file">
        <f:facet name="header">
            <rich:columnGroup>
                <rich:column>
                    <h:outputText value="Name"/>
                </rich:column>
                <rich:column>
                    <h:outputText value="All"/>
                </rich:column>
                <rich:column>
                    <h:outputText value="Specialization"/>
                </rich:column>
                <rich:column>
                    <h:outputText value="Group"/>
                </rich:column>
                <rich:column>
                    <h:outputText value="Selected person"/>
                </rich:column>
            </rich:columnGroup>
        </f:facet>
        <rich:column>
            <h:outputText value="#{file.fileName}##{file.id}"/>
        </rich:column>
        <rich:column>
            <a4j:commandButton value="Manage" action="#{fileAccessView.setRenderAll(file)}"
                               render="selP selG selS selA"/>
        </rich:column>
        <rich:column>
            <a4j:commandButton value="Manage" action="#{fileAccessView.setRenderSpecialization(file)}"
                               render="selP selG selS selA" disabled="#{file.fileAccess.shareAll}"/>
        </rich:column>
        <rich:column>
            <a4j:commandButton value="Manage" action="#{fileAccessView.setRenderGroup(file)}"
                               render="selP selG selS selA" disabled="#{file.fileAccess.shareAll}"/>
        </rich:column>
        <rich:column>
            <a4j:commandButton value="Manage" action="#{fileAccessView.setRenderUser(file)}"
                               render="selP selG selS selA" disabled="#{file.fileAccess.shareAll}"/>
        </rich:column>
    </rich:dataTable>
</div>
<h:panelGroup id="selA">
    <h:panelGroup rendered="#{fileAccessView.renderAll}">
        <div class="row-fluid">
            <div class="row-fluid">
                <h:outputText value="#{fileAccessView.selectedFile.fileName}" styleClass="bigText"/>
            </div>
            <!--<h:outputLabel value="#{messages['view.shareall.information']}" for="radioAll"/>-->
            <h:selectOneRadio id="radioAll" value="#{fileAccessView.selectedFile.fileAccess.shareAll}">
                <f:selectItem itemValue="true" itemLabel="Yes"/>
                <f:selectItem itemValue="false" itemLabel="No"/>
            </h:selectOneRadio>
        </div>

        <div class="row-fluid">
            <a4j:commandButton value="Save" action="#{fileAccessView.saveAll}" render="info"/>
        </div>
    </h:panelGroup>
</h:panelGroup>
<h:panelGroup id="selS">
    <h:panelGroup rendered="#{fileAccessView.renderSpecialization}">
        <div class="row-fluid">
            <div class="row-fluid">
                <!--<h:outputText value="#{messages['view.specialization.information']}"/>-->
            </div>
            <div class="row-fluid">
                <h:outputText value="#{fileAccessView.selectedFile.fileName}" styleClass="bigText"/>
            </div>
            <h:selectOneListbox id="specialization2"
                                value="#{fileAccessView.selectedFile.fileAccess.specialization}"
                                converter="#{fileAccessView.specializationConverter}"
                                styleClass="sizeListBox">
                <f:selectItem itemValue="${null}" itemLabel="Not Share"/>
                <f:selectItems value="#{fileAccessView.allSpecializations}" var="specialization"
                               itemValue="#{specialization}" itemLabel="#{specialization.name}"/>
            </h:selectOneListbox>
        </div>
        <div class="row-fluid">
            <a4j:commandButton value="Save" action="#{fileAccessView.saveSpecialization}"/>
        </div>
    </h:panelGroup>
</h:panelGroup>
<h:panelGroup id="selG">
    <h:panelGroup rendered="#{fileAccessView.renderGroup}">
        <div class="row-fluid">
            <div class="row-fluid">
                <!--<h:outputText value="#{messages['view.group.information']}"/>-->
            </div>
            <div class="row-fluid">
                <h:outputText value="#{fileAccessView.selectedFile.fileName}" styleClass="bigText"/>
            </div>
            <h:selectOneListbox id="group2" value="#{fileAccessView.selectedFile.fileAccess.group}"
                                converter="#{fileAccessView.groupConverterForMySpec}"
                                styleClass="sizeListBox">
                <f:selectItem itemValue="${null}" itemLabel="Not Share"/>
                <f:selectItems value="#{fileAccessView.allGroupsForMySpec}" var="group"
                               itemLabel="#{group.name}"
                               itemValue="#{group}"/>
            </h:selectOneListbox>
        </div>
        <div class="row-fluid">
            <a4j:commandButton value="Save" action="#{fileAccessView.saveGroup()}"/>
        </div>
    </h:panelGroup>
</h:panelGroup>
<h:panelGroup id="selP">
    <h:panelGroup rendered="#{fileAccessView.renderUser}">
        <div class="row-fluid">
            <!--<h:outputText value="#{messages['view.student.information']}" styleClass=""/>-->
        </div>
        <div class="row-fluid">
            <h:outputText value="#{fileAccessView.selectedFile.fileName}" styleClass="bigText"/>
        </div>
        <div class="row-fluid marginTop">
            <div class="span6">
                <h:outputLabel value="Specializations" for="specialization"/>
                <br/>
                <h:selectOneListbox id="specialization" value="#{fileAccessView.selectedSpecialization}"
                                    converter="#{fileAccessView.specializationConverter}"
                                    styleClass="sizeListBox">
                    <f:selectItems value="#{fileAccessView.allSpecializations}" var="specialization"
                                   itemValue="#{specialization}" itemLabel="#{specialization.name}"/>
                    <a4j:ajax render="group st1 bAdd" event="change"
                              listener="#{fileAccessView.clear}"/>
                </h:selectOneListbox>
            </div>

            <div class="span6">
                <h:outputLabel value="Groups" for="group"/>
                <br/>
                <h:selectOneListbox id="group" value="#{fileAccessView.selectedGroup}"
                                    converter="#{fileAccessView.groupConverter}" styleClass="sizeListBox">
                    <f:selectItems value="#{fileAccessView.allGroups}" var="group" itemLabel="#{group.name}"
                                   itemValue="#{group}"/>
                    <a4j:ajax render="st1 bAdd" event="change"/>
                </h:selectOneListbox>
            </div>
        </div>
        <div class="row-fluid">
            <h:panelGroup id="sSgroup">
                <div class="span3">
                    <h:outputLabel value="Students" for="st1"/>
                    <br/>
                    <h:selectOneListbox id="st1" value="#{fileAccessView.selectedStudent}"
                                        converter="#{fileAccessView.studentConverter}"
                                        styleClass="sizeListBox">
                        <f:selectItems value="#{fileAccessView.allStudents}" var="student"
                                       itemLabel="#{student.name}"
                                       itemValue="#{student}"/>
                        <a4j:ajax render="st2 bAdd" event="change"/>
                    </h:selectOneListbox>
                </div>
                <div class="span3 button">
                    <a4j:commandButton id="bAdd" value="Add" action="#{fileAccessView.addAccessForStudent}"
                                       render="sSWA sSgroup bAdd" styleClass="inButton"
                                       disabled="#{not fileAccessView.onlyOneElementForStudents and empty fileAccessView.selectedStudent}"/>
                </div>
            </h:panelGroup>

            <h:panelGroup id="lecG">
                <div class="span3">
                    <h:outputLabel value="Lecturers" for="st3"/>
                    <br/>
                    <h:selectOneListbox id="st3" value="#{fileAccessView.selectedLecturer}"
                                        converter="#{fileAccessView.lecturerConverter}"
                                        styleClass="sizeListBox">
                        <f:selectItems value="#{fileAccessView.allLecturers}" var="lecturer"
                                       itemLabel="#{lecturer.name}"
                                       itemValue="#{lecturer}"/>
                        <a4j:ajax render="bAdd2" event="change"/>
                    </h:selectOneListbox>
                </div>
                <div class="span3 button">
                    <a4j:commandButton id="bAdd2" value="Add" action="#{fileAccessView.addAccessForLecturer}"
                                       render="lecG sSWA" styleClass="inButton"
                                       disabled="#{not fileAccessView.onlyOneElementForLecturers and empty fileAccessView.selectedLecturer}"/>
                </div>
            </h:panelGroup>
        </div>
        <div class="row-fluid">
            <h:panelGroup id="sSWA">
                <div class="span3">
                    <h:outputLabel value="Users with access" for="st2"/>
                    <br/>
                    <h:selectOneListbox id="st2" value="#{fileAccessView.selectedUserWithAccess}"
                                        converter="#{fileAccessView.userConverter}"
                                        styleClass="sizeListBox">
                        <f:selectItems value="#{fileAccessView.selectedFile.fileAccess.users}" var="user"
                                       itemLabel="#{user.name}"
                                       itemValue="#{user}"/>
                        <a4j:ajax render="bRe" event="change"/>
                    </h:selectOneListbox>
                </div>
                <div class="span3 button">
                    <a4j:commandButton id="bRe" value="Remove"
                                       action="#{fileAccessView.removeAccessForStudent}"
                                       render="st1 sSWA bRe sSgroup lecG" styleClass="inButton"
                                       disabled="#{not fileAccessView.onlyOneElementForUsers and empty fileAccessView.selectedUserWithAccess}"/>
                </div>
            </h:panelGroup>

        </div>
        <div class="row-fluid">
            <a4j:commandButton value="Save" action="#{fileAccessView.saveUsers()}" styleClass="saveButton"/>
        </div>
    </h:panelGroup>
</h:panelGroup>

</h:form>
</ui:define>

</ui:composition>