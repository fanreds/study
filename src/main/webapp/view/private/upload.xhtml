<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: kleks
  Date: 1/29/13
  Time: 10:09 AM
-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:a4j="http://richfaces.org/a4j"
                template="../../layout/template1.xhtml">
    <!--<f:metadata>-->
    <!--<s:viewAction action="#{uploadView.init}"/>-->
    <!--</f:metadata>-->


    <ui:define name="menuleft">

    </ui:define>
    <ui:define name="content">
        <h:form id="f1">
            <div class="row-fluid">
                <h:outputLabel for="upload" value="File Uploader"/>
                <rich:fileUpload id="upload" acceptedTypes="jpg, gif, png, txt, doc, odt, pdf, zip, tar"
                                 ontyperejected="alert('Only JPG, GIF, PNG and TXT files are accepted');"
                                 fileUploadListener="#{uploadView.listener}" immediateUpload="true" listHeight="0"
                                 styleClass="avatarUpload">

                    <a4j:ajax event="uploadcomplete" execute="@none" render="info"/>
                </rich:fileUpload>
            </div>
            <div class="row-fluid">
                <rich:dataTable id="info" value="#{uploadView.userFiles}" var="file" styleClass="widthconst">
                    <h:column>
                        <h:outputText value="#{file.fileName}"/>
                    </h:column>
                    <h:column>
                        <!--<h:graphicImage value="/img/placeholder.png"/>-->
                        <h:graphicImage value="#{uploadView.image(file)}"/>
                    </h:column>
                    <h:column>
                        <a4j:commandButton value="Delete" action="#{uploadView.delete(file)}" render="info"/>
                    </h:column>
                </rich:dataTable>
            </div>

        </h:form>
    </ui:define>

</ui:composition>